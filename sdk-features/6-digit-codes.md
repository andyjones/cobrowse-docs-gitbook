# Use 6-digit codes

By default, Cobrowse does not require any visible UI presented to the user. It will exist in the background of your app, and only activate when agents initiate a new session.

You may optionally present a UI in your app that enables users to generate 6-digit codes. Users may then read a code over the phone or in chat, and agents can use the 6-digit code to initiate the Cobrowse session.

For this purpose, we provide a default plug-and-play UI that provides this functionality. We also provide a set of public methods if you prefer to build a custom UI. More info at [Customize the interface.](customize-the-interface/)

## Implementation

These are the requirements to initiate sessions using 6-digit codes.

You may expose a small UI in your app for users to generate a 6-digit code that they pass to an agent over the phone or chat to initiate a session.

**Note:** This guide will use our default UI \(very basic!\) to display the code. You can replace it with your own UI if you prefer! Please see [Customize the interface](customize-the-interface/).

{% tabs %}
{% tab title="Web" %}
### Generate the 6-digit code

```javascript
// ensure Cobrowse is loaded
CobrowseIO.client().then(function() {
    // create a code a display it to the user using your own UI
    CobrowseIO.createSessionCode().then(function(code) {
       console.log('your code is', code);
    });

});
```

{% hint style="info" %}
6-digit codes expire after approximately 15 minutes, so it's best practice to generate a 6-digit code only when a user wants to start a session. 
{% endhint %}
{% endtab %}

{% tab title="iOS" %}
To setup 6-digit codes on iOS:

1. Add the appropriate code below into a view controller in your app.
2. Hook up a trigger for the action \(or call it programatically if you prefer\).

#### Swift

```swift
import CobrowseIO

class ExampleViewController: UIViewController {
    var sessionController: CBIOViewController!

    @IBAction func startCobrowse(sender: UIBarButtonItem) {
        self.sessionController = CBIOViewController()
        self.navigationController?.pushViewController(self.sessionController, animated: true)
    }

    // ... the rest of your view controller
}
```

For a full example written in Swift, see our Listr sample app at: [https://github.com/cobrowseio/Listr](https://github.com/cobrowseio/Listr)

#### Objective C

```objectivec
@import CobrowseIO;

@implementation ExampleViewController {
    CBIOViewController* sessionController;
}

-(IBAction) startCobrowse:(id)sender {
    sessionController = [[CBIOViewController alloc] init];
    [self.navigationController pushViewController:sessionController animated:YES];
}

// ... the rest of your view controller

@end
```

Make sure you've hooked up a trigger for the `startCobrowse` IBAction that we've just added. Then head to [https://cobrowse.io/dashboard](https://cobrowse.io/dashboard) and enter the 6 digit code that will be generated by your app when you trigger the action!
{% endtab %}

{% tab title="Android" %}
```java
import io.cobrowse.ui.CobrowseActivity;

public class YourActivity extends Activity {

    // the rest of your Activity

    public void startCobrowse(View view) {
        Intent intent = new Intent(this, CobrowseActivity.class);
        startActivity(intent);
    }
}
```

Make sure you've hooked up a trigger for the `startCobrowse` method that we've just added. Then head to [https://cobrowse.io/dashboard](https://cobrowse.io/dashboard) and enter the 6 digit code that will be generated by your app when you trigger the action!
{% endtab %}

{% tab title="React Native" %}
We've provided a view that will do all the session creation and management for you. All you need to do is include this somewhere in your react native view hierarchy. It's not a requirement to use this UI, you can easily build your own if you like!

```javascript
import { CobrowseView } from 'cobrowse-sdk-react-native';

export default class App extends Component {
    render() {
        return (
            <View>
                <CobrowseView />
            </View>
        );
    }
}
```
{% endtab %}

{% tab title="Xamarin" %}
### Xamarin.iOS implementation

To setup user-initiated sessions:

1. Add the appropriate code below into a view controller in your app.
2. Hook up a trigger for the action \(or call it programatically if you prefer\).

```csharp
using Xamarin.CobrowseIO;

namespace SampleApp.iOS
{
    public partial class ViewController : UIViewController
    {
        private void StartCobrowse(object sender, EventArgs e)
        {
            NavigationController.PushViewController(new CobrowseViewController(), animated: true);
        }
    }
}
```

For a full example written in C\#, see our sample app at: [https://github.com/cobrowseio/cobrowse-sdk-xamarin](https://github.com/cobrowseio/cobrowse-sdk-xamarin)

### Xamarin.Android implementation

We have provided some default UI to make things easier to get started:

```csharp
using Xamarin.CobrowseIO;
using Xamarin.CobrowseIO.UI;

namespace SampleApp.Android
{
    [Activity]
    public class MainActivity : AppCompatActivity
    {
        private void StartCobrowse(object sender, EventArgs e)
        {
            var intent = new Intent(this, typeof(CobrowseActivity));
            StartActivity(intent);
        }
    }
}
```

### Xamarin.Forms implementation

The Cobrowse.io Xamarin SDK provides a convenient way to open the default 6 digit code UI. In your **cross-platform** project:

```csharp
using Xamarin.CobrowseIO.Abstractions;

namespace YourAppNamespace.Forms
{
    public partial class YourPage : Xamarin.Forms.Page
    {
        public void StartCobrowse()
        {
            CobrowseIO.Instance.OpenCobrowseUI();
        }
    }
}
```

## Test it

Make sure you've hooked up a trigger for the `StartCobrowse` method that we've just added. Then head to [https://cobrowse.io/dashboard](https://cobrowse.io/dashboard) and enter the 6 digit code that will be generated by your app when you trigger the action!
{% endtab %}

{% tab title="MacOS" %}
The Cobrowse.io SDK for MacOS does not provide a default UI for generating 6 digit codes, instead you can generate a code for your UI by using the `-createSession` API:

```objectivec
[CobrowseIO.instance createSession:^(NSError * _Nullable err, CBIOSession * _Nullable session) {
    if (err) NSLog(@"Error creating code %@", err);
    else NSLog(@"Created session code: %@", session.code);
}];
```

You can monitor changes in the state of the session you create using the Cobrowse delegate methods:

```objectivec
-(void) cobrowseSessionDidUpdate: (nonnull CBIOSession*) session;
-(void) cobrowseSessionDidEnd: (nonnull CBIOSession*) session;
```

You can get information about the state of the session using the following methods, which may adjust the UI you are showing:

```objectivec
[session isPending] // session has been created but is waiting for agent or user
[session isAuthorizing] // waiting for the user to confirm the session
[session isActive] // session running, frames are streaming to the agent
[session isEnded] // session is over and can no longer be used or edited
```
{% endtab %}

{% tab title="Windows" %}
### Windows implementation

You may use either Windows Forms, or WPF in your application. The Cobrowse.io SDK for Windows does not provide a default UI for generating 6 digit codes, instead you can generate a code for your UI by using the `CreateSession` API:

```csharp
public async Task StartCobrowse()
{
  CobrowseIO.Instance.SessionAuthorizing += OnSessionAuthorizing;
  CobrowseIO.Instance.SessionUpdated += OnSessionUpdated;

  await CobrowseIO.Instance.Start();
  await CobrowseIO.Instance.CreateSession();
}

...

private void OnSessionUpdated(Session session)
{
  if (session.Code != null)
    Debug.WriteLine($"Created session code: {0}", session.Code);
}
```

**Warning:** Be aware that callback is called from non-UI thread.

In _WPF_ you can just bind to CobrowseIO instance property:

```text
  xmlns:io="clr-namespace:Cobrowse.IO;assembly=Cobrowse.IO"

  ...

  <TextBlock Text="{Binding Source={x:Static io:CobrowseIO.Instance}, Path=CurrentSession.Code}"/>
```

Complete example of WPF integration is available [here](https://github.com/cobrowseio/cobrowse-sdk-windows-examples).

## Test it

Make sure you've added a call to the `StartCobrowse` method that we've just created. Then head to [https://cobrowse.io/dashboard](https://cobrowse.io/dashboard) and enter the 6 digit code that will be generated by your app when you trigger the action!
{% endtab %}
{% endtabs %}

